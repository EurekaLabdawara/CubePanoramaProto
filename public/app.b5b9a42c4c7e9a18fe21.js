(()=>{var e={943:()=>{}},t={};function o(n){var s=t[n];if(void 0!==s)return s.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";o(943),function(){var e=window.Marzipano,t=window.screenfull,o=window.APP_DATA,n=document.querySelector("#pano"),s=document.querySelector("#titleBar .sceneName"),i=document.querySelector("#sceneList"),a=document.querySelectorAll("#sceneList .scene"),r=document.querySelector("#sceneListToggle"),c=document.querySelector("#autorotateToggle"),d=document.querySelector("#fullscreenToggle");if(window.matchMedia){var l=function(){u.matches?(document.body.classList.remove("desktop"),document.body.classList.add("mobile")):(document.body.classList.remove("mobile"),document.body.classList.add("desktop"))},u=matchMedia("(max-width: 500px), (max-height: 500px)");l(),u.addListener(l)}else document.body.classList.add("desktop");document.body.classList.add("no-touch"),window.addEventListener("touchstart",(function(){document.body.classList.remove("no-touch"),document.body.classList.add("touch")}));var m={controls:{mouseViewMode:o.settings.mouseViewMode}},p=new e.Viewer(n,m),h=o.scenes.map((function(t){var o="tiles",n=e.ImageUrlSource.fromString(o+"/"+t.id+"/{z}/{f}/{y}/{x}.jpg",{cubeMapPreviewUrl:o+"/"+t.id+"/preview.jpg"}),s=new e.CubeGeometry(t.levels),i=e.RectilinearView.limit.traditional(t.faceSize,100*Math.PI/180,120*Math.PI/180),a=new e.RectilinearView(t.initialViewParameters,i),r=p.createScene({source:n,geometry:s,view:a,pinFirstLevel:!0});return t.linkHotspots.forEach((function(e){var t=function(e){var t=document.createElement("div");t.classList.add("hotspot"),t.classList.add("link-hotspot");var o=document.createElement("img");o.src="img/link.png",o.classList.add("link-hotspot-icon");for(var n=["-ms-transform","-webkit-transform","transform"],s=0;s<n.length;s++){var i=n[s];o.style[i]="rotate("+e.rotation+"rad)"}t.addEventListener("click",(function(){q(function(e){for(var t=0;t<h.length;t++)if(h[t].data.id===e)return h[t];return null}(e.target))})),P(t);var a=document.createElement("div");return a.classList.add("hotspot-tooltip"),a.classList.add("link-hotspot-tooltip"),a.innerHTML=x(e.target).name,t.appendChild(o),t.appendChild(a),t}(e);r.hotspotContainer().createHotspot(t,{yaw:e.yaw,pitch:e.pitch})})),t.infoHotspots.forEach((function(e){var t=function(e){var t=document.createElement("div");t.classList.add("hotspot"),t.classList.add("info-hotspot");var o=document.createElement("div");o.classList.add("info-hotspot-header");var n=document.createElement("div");n.classList.add("info-hotspot-icon-wrapper");var s=document.createElement("img");s.src="img/info.png",s.classList.add("info-hotspot-icon"),n.appendChild(s);var i=document.createElement("div");i.classList.add("info-hotspot-title-wrapper");var a=document.createElement("div");if(a.classList.add("info-hotspot-title"),a.innerHTML=e.title,i.appendChild(a),!e.custom){var r=document.createElement("div");r.classList.add("info-hotspot-close-wrapper");var c=document.createElement("img");c.src="img/close.png",c.classList.add("info-hotspot-close-icon"),r.appendChild(c)}if(o.appendChild(n),o.appendChild(i),e.custom||o.appendChild(r),!e.custom){var d=document.createElement("div");d.classList.add("info-hotspot-text"),d.innerHTML=e.text}t.appendChild(o),e.custom;var l=document.createElement("div");if(l.innerHTML=t.innerHTML,l.classList.add("info-hotspot-modal"),document.body.appendChild(l),e.custom){var u=document.querySelector("#modal");t.querySelector(".info-hotspot-header").addEventListener("click",(function(){switch(u.querySelector("h1").innerHTML=e.title,u.querySelectorAll(".custom-modal-content").forEach((function(e){e.hidden=!0})),e.type){case"youtube":u.querySelector("iframe").hidden=!1,u.querySelector("iframe").src=e.link;break;case"pdf":u.querySelector("#pdf-viewer").hidden=!1,u.querySelector("#pdf-viewer").setAttribute("src",e.link);break;case"image":u.querySelector("img").hidden=!1}u.showModal()})),u.querySelector(".close-custom-modal").addEventListener("click",(function(){u.querySelectorAll(".custom-modal-content").hidden=!0,u.classList.remove("hide"),u.close()}))}else{var m=function(){t.classList.toggle("visible"),l.classList.toggle("visible")};t.querySelector(".info-hotspot-header").addEventListener("click",m),l.querySelector(".info-hotspot-close-wrapper").addEventListener("click",m)}return P(t),t}(e);r.hotspotContainer().createHotspot(t,{yaw:e.yaw,pitch:e.pitch}),e.custom})),{data:t,scene:r,view:a}})),v=e.autorotate({yawSpeed:.03,targetPitch:0,targetFov:Math.PI/2});o.settings.autorotateEnabled&&c.classList.add("enabled"),c.addEventListener("click",(function(){c.classList.contains("enabled")?(c.classList.remove("enabled"),C()):(c.classList.add("enabled"),k())})),t.enabled&&o.settings.fullscreenButton?(document.body.classList.add("fullscreen-enabled"),d.addEventListener("click",(function(){t.toggle()})),t.on("change",(function(){t.isFullscreen?d.classList.add("enabled"):d.classList.remove("enabled")}))):document.body.classList.add("fullscreen-disabled"),r.addEventListener("click",(function(){i.classList.toggle("enabled"),r.classList.toggle("enabled")})),document.body.classList.contains("mobile")||(i.classList.add("enabled"),r.classList.add("enabled")),h.forEach((function(e){document.querySelector('#sceneList .scene[data-id="'+e.data.id+'"]').addEventListener("click",(function(){q(e),document.body.classList.contains("mobile")&&(i.classList.remove("enabled"),r.classList.remove("enabled"))}))}));var f=document.querySelector("#viewUp"),L=document.querySelector("#viewDown"),g=document.querySelector("#viewLeft"),w=document.querySelector("#viewRight"),y=document.querySelector("#viewIn"),b=document.querySelector("#viewOut"),E=document.querySelector("#audioBtn"),M=document.querySelector("#BGM"),S=p.controls();function q(e){C(),e.view.setParameters(e.data.initialViewParameters),e.scene.switchTo(),k(),function(e){s.innerHTML=e.data.name.replace("&","&amp;").replace("<","&lt;").replace(">","&gt;")}(e),function(e){for(var t=0;t<a.length;t++){var o=a[t];o.getAttribute("data-id")===e.data.id?o.classList.add("current"):o.classList.remove("current")}}(e)}function k(){c.classList.contains("enabled")&&(p.startMovement(v),p.setIdleMovement(3e3,v))}function C(){p.stopMovement(),p.setIdleMovement(1/0)}function P(e,t){t=["touchstart","touchmove","touchend","touchcancel","wheel","mousewheel"];for(var o=0;o<t.length;o++)e.addEventListener(t[o],(function(e){e.stopPropagation()}))}function x(e){for(var t=0;t<o.scenes.length;t++)if(o.scenes[t].id===e)return o.scenes[t];return null}S.registerMethod("upElement",new e.ElementPressControlMethod(f,"y",-.7,3),!0),S.registerMethod("downElement",new e.ElementPressControlMethod(L,"y",.7,3),!0),S.registerMethod("leftElement",new e.ElementPressControlMethod(g,"x",-.7,3),!0),S.registerMethod("rightElement",new e.ElementPressControlMethod(w,"x",.7,3),!0),S.registerMethod("inElement",new e.ElementPressControlMethod(y,"zoom",-.7,3),!0),S.registerMethod("outElement",new e.ElementPressControlMethod(b,"zoom",.7,3),!0),E.addEventListener("click",(function(){console.log("audio",M),M.muted?(M.muted=!1,M.play()):(M.muted=!0,M.pause()),console.log("audio new mute state",M.muted),console.log("audio toggled")})),q(h[0])}()})()})();
//# sourceMappingURL=app.b5b9a42c4c7e9a18fe21.js.map